{% extends 'common.html'%} {% load static %} {% block common %}
<link href="{%static 'css/profile.css'%}" rel="stylesheet" type="text/css">

<div class="container">
    <h2 id="name"> {{request.user.first_name}} {{request.user.last_name}}</h2>
    <div class="row">
        <div class="col-md-4">
            <form action="{% url 'change_profile_pic' %}" method="post" enctype="multipart/form-data" id="img_upload">
                {% csrf_token %}
                <div>
                    {% for p in picture %} {% if p.profile_pic %}
                    <img id="pp_image" src="{{p.profile_pic.url}}" alt="User picture" class="profile_pic"> {% else %}
                    <img id="pp_image" src="https://image.freepik.com/free-vector/vector-avatar-smiling-man-facial-expression_102172-203.jpg"> {% endif %} {% endfor %}
                    <br>
                    <div>
                        <span style="margin-right: 20px; "><i class="fas fa-camera" style="color: rgb(3, 3, 3)"></i>
                            Change
                            picture</span>
                        <input type="file" id="profile_pic" name="profile_pic">
                    </div>
                </div>
                <input class="mt-3 btn btn-primary" type="submit" value="Submit">
            </form>

        </div>
        <div class="col-md-8">
            <button id="ppbtn" onclick="myFunction()">Edit Profile</button>
            <div id="details">
                {% for x in picture %}

                <div>
                    <label>First Name: </label> {{x.first_name}}
                </div>
                <div>
                    <label>Last Name:- </label> {{x.last_name}}
                </div>
                <div>
                    <label>Email:- </label> {{x.email}}
                </div>
                <div>
                    <label>Username:- </label> {{x.username}}
                </div>
                <div>
                    <label>Contact:- </label> {{x.contact}}
                </div>
                <div>
                    <label>City:- </label> {{x.city}}
                </div>
                <div>
                    <label>Address:- </label> {{x.address}}
                </div>
                <div>
                    <label>Blood Group:- </label> {{x.blood}}
                </div>
                {% endfor %}
            </div>


            <form id="form-btn" action="{%url 'profile'%}" method="post" style="margin-top: 20px;">
                {% csrf_token %}
                <div class="form-group">
                    <div class="col-md-8">
                        <label>First Name</label> {{reg_form.first_name}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>Last Name</label> {{reg_form.last_name}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>Email</label> {{reg_form.email}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>Username</label> {{reg_form.username}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>Contact</label> {{reg_form.contact}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>City</label> {{reg_form.city}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>Address</label> {{reg_form.address}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <label>Blood Group</label> {{reg_form.blood}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-8">
                        <input type="submit" class="btn btn-success" value="Save change" />
                    </div>
                </div>
            </form>
        </div>

    </div>
    <div class="row">
        Journey history....
    </div>
</div>

<script>
    function myFunction() {
        var x = document.getElementById("form-btn");
        var y = document.getElementById("details");
        if (x.style.display === "none") {
            x.style.display = "block";
            y.style.display = "none";
        } else {
            x.style.display = "none";
            y.style.display = "block";
        }
    }
</script>
<script>
    var x = document.getElementById("form-btn");
    x.style.display = "none";
</script>

{% endblock common %}